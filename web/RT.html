<html>
    <head>
        <title>Reaction Timer</title>
        <style type="text/css"></style>
    </head>

    <body>
        <img class="stimulus" src="./stimulus/1.jpg">
        
        <p class="bold">Your time: <span id="timeTaken"></span></p>
        
        <p class="bold">Pressed E: <span id="timeTaken2"></span></p>
        <button onclick="getRT()">RT</button>
        
        
        <script type="text/javascript">
            var ws = new WebSocket("ws://127.0.0.1:8888/")
            var start = new Date().getTime();
            var detect_key = false;
            
            // main function
            ws.onmessage = function (event) {
                var content = document.createTextNode(event.data);
                message.appendChild(content);
                messages.appendChild(message);
            };
            document.body.appendChild(messages);
            
            
            //.page {display: none;}
            
 //start = new Date().getTime();
            
            function getRT() {
                var end = new Date().getTime();
                var timeTaken = (end - start) / 1000;
                document.getElementById("timeTaken").innerHTML = timeTaken + "s";
                return timeTaken
            }

            // Record key if detect_key == true
            document.onkeydown = function(e){
                e = e || window.event;
                if (e.keyCode == 69){      // keycode for e   i: 73
                    document.getElementById("timeTaken2").innerHTML = getRT() + "s";
                    start = new Date().getTime(); // refresh
                 }
            }
        </script>
    </body>

</html>
